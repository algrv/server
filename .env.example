# ============================================================================
# DATABASE
# ============================================================================

# supabase connection String
SUPABASE_CONNECTION_STRING=postgresql://postgres.xxxxxxxxxxxx:your-password@aws-0-region.pooler.supabase.com:5432/postgres

# ============================================================================
# REDIS (Session Buffer)
# ============================================================================

# redis URL for buffering WebSocket writes before flushing to Postgres
# local: redis://localhost:6379
# upstash: rediss://default:xxxxx@xxxxx.upstash.io:6379
REDIS_URL=redis://localhost:6379

# ============================================================================
# LLM CONFIGURATION
# ============================================================================

# query transformer (expands user queries into technical keywords)
TRANSFORMER_PROVIDER=anthropic
TRANSFORMER_MODEL=claude-3-haiku-20240307

# code generator (generates Strudel code from user queries)
GENERATOR_PROVIDER=anthropic
GENERATOR_MODEL=claude-sonnet-4-5-20250929

# Other model options:
# GENERATOR_MODEL=claude-opus-4-5-20251101  # Most capable, slowest
# GENERATOR_MODEL=claude-sonnet-4-20250514  # Balanced (current)
# GENERATOR_MODEL=claude-3-5-haiku-20241022 # Fastest, cheapest

# To use OpenAI:
# GENERATOR_PROVIDER=openai
# GENERATOR_MODEL=gpt-4o
# GENERATOR_MODEL=o1-preview

# embedder (generates vector embeddings from text)
EMBEDDER_PROVIDER=openai
EMBEDDER_MODEL=text-embedding-3-small

# llm api keys
ANTHROPIC_API_KEY=sk-ant-api03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================================
# OPTIONAL CONFIGURATION
# ============================================================================

# query transformation settings
TRANSFORMER_MAX_TOKENS=200
TRANSFORMER_TEMPERATURE=0.3

# retrieval settings
RETRIEVAL_TOP_K=5

# chunking settings (for ingestion)
CHUNK_TARGET_TOKENS=500
CHUNK_OVERLAP_TOKENS=50

# ============================================================================
# AUTHENTICATION (OAuth Providers)
# ============================================================================

# base URL for OAuth callbacks
BASE_URL=http://localhost:8080

# JWT secret for signing tokens
# Generate with: openssl rand -base64 64
JWT_SECRET=your-jwt-secret-here

# Session secret for OAuth cookie signing (required)
# Generate with: openssl rand -base64 32
SESSION_SECRET=your-session-secret-here

# Google OAuth (Required)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-google-client-secret

# GitHub OAuth (Optional)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# Apple Sign In (Optional)
# APPLE_CLIENT_ID=your-apple-client-id
# APPLE_CLIENT_SECRET=your-apple-client-secret
