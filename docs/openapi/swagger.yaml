definitions:
  admin.SetUseInTrainingRequest:
    properties:
      use_in_training:
        type: boolean
    type: object
  admin.StrudelAdminResponse:
    properties:
      code:
        type: string
      description:
        type: string
      id:
        type: string
      is_public:
        type: boolean
      tags:
        items:
          type: string
        type: array
      title:
        type: string
      use_in_training:
        type: boolean
      user_id:
        type: string
    type: object
  agent.Message:
    properties:
      content:
        description: message content
        type: string
      role:
        description: '"user" or "assistant"'
        type: string
    type: object
  auth.AuthResponse:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/users.User'
    type: object
  auth.MessageResponse:
    properties:
      message:
        type: string
    type: object
  auth.UpdateProfileRequest:
    properties:
      avatar_url:
        maxLength: 500
        type: string
      name:
        maxLength: 100
        type: string
    required:
    - name
    type: object
  auth.UserResponse:
    properties:
      user:
        $ref: '#/definitions/users.User'
    type: object
  collaboration.CreateInviteTokenRequest:
    properties:
      expires_at:
        type: string
      max_uses:
        type: integer
      role:
        enum:
        - co-author
        - viewer
        type: string
    required:
    - role
    type: object
  collaboration.CreateSessionRequest:
    properties:
      code:
        description: 1MB limit
        maxLength: 1048576
        type: string
      title:
        maxLength: 200
        type: string
    required:
    - title
    type: object
  collaboration.CreateSessionResponse:
    properties:
      code:
        type: string
      created_at:
        type: string
      host_user_id:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_activity:
        type: string
      title:
        type: string
    type: object
  collaboration.InviteTokenResponse:
    properties:
      created_at:
        type: string
      expires_at:
        type: string
      id:
        type: string
      max_uses:
        type: integer
      role:
        type: string
      session_id:
        type: string
      token:
        type: string
      uses_count:
        type: integer
    type: object
  collaboration.InviteTokensListResponse:
    properties:
      tokens:
        items:
          $ref: '#/definitions/collaboration.InviteTokenResponse'
        type: array
    type: object
  collaboration.JoinSessionRequest:
    properties:
      display_name:
        maxLength: 100
        type: string
      invite_token:
        type: string
    required:
    - invite_token
    type: object
  collaboration.JoinSessionResponse:
    properties:
      display_name:
        type: string
      role:
        type: string
      session_id:
        type: string
    type: object
  collaboration.MessageResponse:
    properties:
      message:
        type: string
    type: object
  collaboration.MessagesResponse:
    properties:
      messages:
        items:
          $ref: '#/definitions/sessions.Message'
        type: array
    type: object
  collaboration.ParticipantResponse:
    properties:
      display_name:
        type: string
      id:
        type: string
      joined_at:
        type: string
      left_at:
        type: string
      role:
        type: string
      status:
        type: string
      user_id:
        type: string
    type: object
  collaboration.ParticipantsListResponse:
    properties:
      participants:
        items:
          $ref: '#/definitions/collaboration.ParticipantResponse'
        type: array
    type: object
  collaboration.SessionResponse:
    properties:
      code:
        type: string
      created_at:
        type: string
      ended_at:
        type: string
      host_user_id:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      last_activity:
        type: string
      participants:
        items:
          $ref: '#/definitions/collaboration.ParticipantResponse'
        type: array
      title:
        type: string
    type: object
  collaboration.SessionsListResponse:
    properties:
      sessions:
        items:
          $ref: '#/definitions/collaboration.SessionResponse'
        type: array
    type: object
  collaboration.UpdateSessionCodeRequest:
    properties:
      code:
        description: 1MB limit
        maxLength: 1048576
        type: string
    required:
    - code
    type: object
  collaboration.UpdateSessionCodeResponse:
    properties:
      code:
        type: string
      message:
        type: string
    type: object
  errors.ErrorResponse:
    properties:
      details:
        description: optional details (sanitized in production)
        type: string
      error:
        description: error code (e.g., "unauthorized", "not_found")
        type: string
      message:
        description: user-friendly message
        type: string
    type: object
  health.PingResponse:
    properties:
      message:
        type: string
    type: object
  health.Response:
    properties:
      service:
        type: string
      status:
        type: string
      version:
        type: string
    type: object
  sessions.Message:
    properties:
      content:
        type: string
      createdAt:
        type: string
      id:
        type: string
      messageType:
        description: MessageTypeUserPrompt, MessageTypeAIResponse, MessageTypeChat
        type: string
      role:
        description: user, assistant
        type: string
      sessionID:
        type: string
      userID:
        type: string
    type: object
  sessions.TransferSessionRequest:
    properties:
      session_id:
        type: string
      title:
        type: string
    required:
    - session_id
    - title
    type: object
  sessions.TransferSessionResponse:
    properties:
      message:
        type: string
      strudel:
        $ref: '#/definitions/strudels.Strudel'
      strudel_id:
        type: string
    type: object
  strudels.CreateStrudelRequest:
    properties:
      categories:
        description: max 10 categories, each max 50 chars
        items:
          type: string
        maxItems: 10
        type: array
      code:
        description: 1MB limit
        maxLength: 1048576
        type: string
      conversation_history:
        description: max 100 messages
        items:
          $ref: '#/definitions/agent.Message'
        maxItems: 100
        type: array
      description:
        maxLength: 2000
        type: string
      is_public:
        type: boolean
      tags:
        description: max 20 tags, each max 50 chars
        items:
          type: string
        maxItems: 20
        type: array
      title:
        maxLength: 200
        type: string
    required:
    - code
    - title
    type: object
  strudels.MessageResponse:
    properties:
      message:
        type: string
    type: object
  strudels.Strudel:
    properties:
      categories:
        items:
          type: string
        type: array
      code:
        type: string
      conversation_history:
        items:
          $ref: '#/definitions/agent.Message'
        type: array
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      is_public:
        type: boolean
      tags:
        items:
          type: string
        type: array
      title:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  strudels.StrudelsListResponse:
    properties:
      strudels:
        items:
          $ref: '#/definitions/strudels.Strudel'
        type: array
    type: object
  strudels.UpdateStrudelRequest:
    properties:
      categories:
        items:
          type: string
        maxItems: 10
        type: array
      code:
        description: 1MB limit
        maxLength: 1048576
        type: string
      conversation_history:
        items:
          $ref: '#/definitions/agent.Message'
        maxItems: 100
        type: array
      description:
        maxLength: 2000
        type: string
      is_public:
        type: boolean
      tags:
        items:
          type: string
        maxItems: 20
        type: array
      title:
        maxLength: 200
        type: string
    type: object
  users.AIFeaturesEnabledRequest:
    properties:
      ai_features_enabled:
        type: boolean
    type: object
  users.DailyUsage:
    properties:
      count:
        description: Number of generations
        type: integer
      date:
        description: 'Format: "2006-01-02"'
        type: string
    type: object
  users.TrainingConsentRequest:
    properties:
      training_consent:
        type: boolean
    type: object
  users.UsageResponse:
    properties:
      history:
        description: Last 30 days
        items:
          $ref: '#/definitions/users.DailyUsage'
        type: array
      limit:
        description: Daily limit (-1 for unlimited)
        type: integer
      remaining:
        description: Remaining generations today (-1 for unlimited)
        type: integer
      tier:
        description: '"free", "payg", "byok"'
        type: string
      today:
        description: Generations used today
        type: integer
    type: object
  users.User:
    properties:
      ai_features_enabled:
        type: boolean
      avatar_url:
        type: string
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      provider:
        type: string
      training_consent:
        type: boolean
      updated_at:
        type: string
    type: object
host: algorave.ai
info:
  contact:
    name: API Support
    url: https://github.com/algoraveai/server
  description: |-
    AI-powered Strudel code generation and collaborative live coding platform

    Features:
    - AI-powered Strudel code generation from natural language
    - Real-time collaborative editing via WebSockets
    - OAuth authentication (Google, GitHub)
    - Anonymous session support
    - Save and share Strudel patterns
  license:
    name: GPL-3.0
    url: https://www.gnu.org/licenses/gpl-3.0.html
  title: Algorave API
  version: "1.0"
paths:
  /api/v1/admin/strudels/{id}:
    get:
      description: Admin-only endpoint to get any strudel regardless of ownership
      parameters:
      - description: Strudel ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/admin.StrudelAdminResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - AdminKeyAuth: []
      summary: Get any strudel by ID (admin)
      tags:
      - admin
  /api/v1/admin/strudels/{id}/use-in-training:
    put:
      consumes:
      - application/json
      description: Admin-only endpoint to mark a strudel for use in training data
      parameters:
      - description: Strudel ID
        in: path
        name: id
        required: true
        type: string
      - description: Use in training data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/admin.SetUseInTrainingRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/admin.StrudelAdminResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - AdminKeyAuth: []
      summary: Set use_in_training flag on a strudel
      tags:
      - admin
  /api/v1/auth/{provider}:
    get:
      description: Begin OAuth authentication flow with specified provider (google,
        github, apple)
      parameters:
      - description: OAuth provider
        enum:
        - google
        - github
        - apple
        in: path
        name: provider
        required: true
        type: string
      responses:
        "302":
          description: Redirect to OAuth provider
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      summary: Start OAuth authentication
      tags:
      - auth
  /api/v1/auth/{provider}/callback:
    get:
      description: OAuth provider callback. Returns user data and JWT token
      parameters:
      - description: OAuth provider
        enum:
        - google
        - github
        - apple
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.AuthResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      summary: OAuth callback
      tags:
      - auth
  /api/v1/auth/logout:
    post:
      description: Clear authentication session
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.MessageResponse'
      summary: Logout
      tags:
      - auth
  /api/v1/auth/me:
    get:
      description: Get authenticated user's profile
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.UserResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - auth
    put:
      consumes:
      - application/json
      description: Update authenticated user's name and avatar
      parameters:
      - description: Profile update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.UpdateProfileRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/auth.UserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - auth
  /api/v1/ping:
    get:
      description: Simple ping endpoint
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/health.PingResponse'
      summary: Ping
      tags:
      - health
  /api/v1/public/strudels:
    get:
      description: Get publicly shared strudels from all users
      parameters:
      - default: 50
        description: Limit results (max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/strudels.StrudelsListResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      summary: List public strudels
      tags:
      - strudels
  /api/v1/sessions:
    get:
      description: Get all sessions where user is host or participant
      parameters:
      - default: false
        description: Only return active sessions
        in: query
        name: active_only
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.SessionsListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List user's sessions
      tags:
      - sessions
    post:
      consumes:
      - application/json
      description: Create a new collaborative coding session (authenticated users
        only)
      parameters:
      - description: Session data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/collaboration.CreateSessionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/collaboration.CreateSessionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create collaboration session
      tags:
      - sessions
  /api/v1/sessions/{id}:
    delete:
      description: End a collaborative session (host only)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.MessageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: End session
      tags:
      - sessions
    get:
      description: Get session information including participants
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.SessionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get session details
      tags:
      - sessions
    put:
      consumes:
      - application/json
      description: Update the code in a session (host or co-authors only)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Code update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/collaboration.UpdateSessionCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.UpdateSessionCodeResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update session code
      tags:
      - sessions
  /api/v1/sessions/{id}/invite:
    get:
      description: Get all invite tokens for a session (host only)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.InviteTokensListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List invite tokens
      tags:
      - sessions
    post:
      consumes:
      - application/json
      description: Generate an invite link for joining the session (host only)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Token settings
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/collaboration.CreateInviteTokenRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/collaboration.InviteTokenResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create invite token
      tags:
      - sessions
  /api/v1/sessions/{id}/invite/{token_id}:
    delete:
      description: Revoke an invite token to prevent further use (host only)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Token ID (UUID)
        in: path
        name: token_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.MessageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Revoke invite token
      tags:
      - sessions
  /api/v1/sessions/{id}/leave:
    post:
      description: Leave a collaborative session
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.MessageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Leave session
      tags:
      - sessions
  /api/v1/sessions/{id}/messages:
    get:
      description: Retrieve chat messages from a session
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - default: 100
        description: Max messages to return (max 1000)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.MessagesResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get session chat messages
      tags:
      - sessions
  /api/v1/sessions/{id}/participants:
    get:
      description: Get all participants in a session (authenticated and anonymous)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.ParticipantsListResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List session participants
      tags:
      - sessions
  /api/v1/sessions/{id}/participants/{participant_id}:
    delete:
      description: Remove a participant from the session (host only)
      parameters:
      - description: Session ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Participant ID (UUID)
        in: path
        name: participant_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.MessageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove participant
      tags:
      - sessions
  /api/v1/sessions/join:
    post:
      consumes:
      - application/json
      description: Join a collaborative session using an invite token (authenticated
        or anonymous)
      parameters:
      - description: Join request with invite token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/collaboration.JoinSessionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/collaboration.JoinSessionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "403":
          description: Invalid or expired invite
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Join session with invite
      tags:
      - sessions
  /api/v1/sessions/transfer:
    post:
      consumes:
      - application/json
      description: Convert an anonymous session to a saved strudel in authenticated
        user's account
      parameters:
      - description: Transfer request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/sessions.TransferSessionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/sessions.TransferSessionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Transfer anonymous session
      tags:
      - sessions
  /api/v1/strudels:
    get:
      description: Get all strudels owned by the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/strudels.StrudelsListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List user's strudels
      tags:
      - strudels
    post:
      consumes:
      - application/json
      description: Save a new Strudel pattern with code, title, and metadata
      parameters:
      - description: Strudel data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/strudels.CreateStrudelRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/strudels.Strudel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create strudel
      tags:
      - strudels
  /api/v1/strudels/{id}:
    delete:
      description: Delete a strudel (must be owner)
      parameters:
      - description: Strudel ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/strudels.MessageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete strudel
      tags:
      - strudels
    get:
      description: Get a specific strudel by ID (must be owner)
      parameters:
      - description: Strudel ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/strudels.Strudel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get strudel by ID
      tags:
      - strudels
    put:
      consumes:
      - application/json
      description: Update a strudel's properties (must be owner)
      parameters:
      - description: Strudel ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Update data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/strudels.UpdateStrudelRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/strudels.Strudel'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update strudel
      tags:
      - strudels
  /api/v1/users/ai-features-enabled:
    put:
      consumes:
      - application/json
      description: Toggle whether AI features (prompt bar, code generation) are enabled
        for the user
      parameters:
      - description: AI features enabled data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/users.AIFeaturesEnabledRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/users.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user's AI features setting
      tags:
      - users
  /api/v1/users/training-consent:
    put:
      consumes:
      - application/json
      description: Toggle whether the user's public strudels can be used for AI training
      parameters:
      - description: Consent data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/users.TrainingConsentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/users.User'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user's training consent
      tags:
      - users
  /api/v1/users/usage:
    get:
      description: Returns usage statistics for the authenticated user including today's
        count, daily limit, and usage history
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/users.UsageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/errors.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user's usage statistics
      tags:
      - users
  /health:
    get:
      description: Get service health status
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/health.Response'
      summary: Health check
      tags:
      - health
securityDefinitions:
  BearerAuth:
    description: 'JWT token for authenticated requests. Format: Bearer {token}'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
