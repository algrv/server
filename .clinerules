# Algopatterns - Coding Standards

## Documentation
- **Architecture:** [AGENTS.md](AGENTS.md)
- **System specs:** [docs/system-specs/](docs/system-specs/)

## Language & Tooling
- **Go:** 1.21+
- **Linting:** `golangci-lint run ./...` (config in `.golangci.yml`)
- **CI:** Lints run on push/PR (`.github/workflows/lint.yml`)

## Code Style

### General
- Follow standard Go conventions (gofmt, go vet)
- Short variable names in small scopes: `i`, `err`, `ctx`, `db`, `opts`
- Longer names for package-level and exported identifiers
- Import order: stdlib → external → internal
- Comments explain "why" not "what" — skip if self-explanatory
- Keep functions focused and under 50 lines when possible

### File Organization
```
internal/     # Private packages
cmd/          # Entry points (keep main.go minimal)
api/          # HTTP/WebSocket handlers
algopatterns/     # Domain models
```
Within packages: `types.go` for types, `utils.go` for helpers, main logic in primary files.

### Error Handling
```go
if err := processFile(f); err != nil {
    return fmt.Errorf("failed to process %s: %w", f, err)
}
```
- Use early returns
- Always wrap errors with context
- Never ignore errors silently

### Testing
- Table-driven tests for multiple scenarios
- Use `t.Logf()` not `fmt.Printf()`
- Test edge cases: empty inputs, large inputs, nil values, boundaries
- For integration tests, use real files from `docs/` when applicable

## Naming
- Exported types: `PascalCase`
- Unexported: `camelCase`
- Interfaces: action-based names ending in `-er`
- Test files: `*_test.go`

## Commits
Use conventional commits: `feat:`, `fix:`, `chore:`, `docs:`, `test:`, `refactor:`

## Anti-Patterns
- ❌ Magic numbers without named constants
- ❌ Deep nesting (use early returns)
- ❌ Silent error swallowing
- ❌ Generic variable names in large scopes
- ❌ Global mutable state
